!function e(t,n,r){function s(a,o){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!o&&c)return c(a,!0);if(i)return i(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)s(r[a]);return s}({1:[function(e,t,n){var r=e("./router");$(document).ready(function(){router=new r,Backbone.history.start({root:"/",pushState:!0}),console.log("Rewind started")})},{"./router":17}],2:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(e){return"function"==typeof e}function i(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,i,c,h;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],o(n))return!1;if(s(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,i=new Array(r-1),c=1;r>c;c++)i[c-1]=arguments[c];n.apply(this,i)}else if(a(n)){for(r=arguments.length,i=new Array(r-1),c=1;r>c;c++)i[c-1]=arguments[c];for(h=n.slice(),r=h.length,c=0;r>c;c++)h[c].apply(this,i)}return!0},r.prototype.addListener=function(e,t){var n;if(!s(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned){var n;n=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!s(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,i,o;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,r=-1,n===t||s(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(o=i;o-->0;)if(n[o]===t||n[o].listener&&n[o].listener===t){r=o;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],s(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?s(e._events[t])?1:e._events[t].length:0}},{}],3:[function(e,t,n){t.exports.Dispatcher=e("./lib/Dispatcher")},{"./lib/Dispatcher":4}],4:[function(e,t,n){"use strict";function r(){this.$Dispatcher_callbacks={},this.$Dispatcher_isPending={},this.$Dispatcher_isHandled={},this.$Dispatcher_isDispatching=!1,this.$Dispatcher_pendingPayload=null}var s=e("./invariant"),i=1,a="ID_";r.prototype.register=function(e){var t=a+i++;return this.$Dispatcher_callbacks[t]=e,t},r.prototype.unregister=function(e){s(this.$Dispatcher_callbacks[e],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",e),delete this.$Dispatcher_callbacks[e]},r.prototype.waitFor=function(e){s(this.$Dispatcher_isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var t=0;t<e.length;t++){var n=e[t];this.$Dispatcher_isPending[n]?s(this.$Dispatcher_isHandled[n],"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",n):(s(this.$Dispatcher_callbacks[n],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",n),this.$Dispatcher_invokeCallback(n))}},r.prototype.dispatch=function(e){s(!this.$Dispatcher_isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this.$Dispatcher_startDispatching(e);try{for(var t in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[t]||this.$Dispatcher_invokeCallback(t)}finally{this.$Dispatcher_stopDispatching()}},r.prototype.isDispatching=function(){return this.$Dispatcher_isDispatching},r.prototype.$Dispatcher_invokeCallback=function(e){this.$Dispatcher_isPending[e]=!0,this.$Dispatcher_callbacks[e](this.$Dispatcher_pendingPayload),this.$Dispatcher_isHandled[e]=!0},r.prototype.$Dispatcher_startDispatching=function(e){for(var t in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[t]=!1,this.$Dispatcher_isHandled[t]=!1;this.$Dispatcher_pendingPayload=e,this.$Dispatcher_isDispatching=!0},r.prototype.$Dispatcher_stopDispatching=function(){this.$Dispatcher_pendingPayload=null,this.$Dispatcher_isDispatching=!1},t.exports=r},{"./invariant":5}],5:[function(e,t,n){"use strict";var r=function(e,t,n,r,s,i,a,o){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var h=[n,r,s,i,a,o],l=0;c=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return h[l++]}))}throw c.framesToPop=1,c}};t.exports=r},{}],6:[function(e,t,n){"use strict";var r=function(e){var t,n={};if(!(e instanceof Object)||Array.isArray(e))throw new Error("keyMirror(...): Argument must be an object.");for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n};t.exports=r},{}],7:[function(e,t,n){"use strict";function r(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}t.exports=Object.assign||function(e,t){for(var n,s,i=r(e),a=1;a<arguments.length;a++){n=arguments[a],s=Object.keys(Object(n));for(var o=0;o<s.length;o++)i[s[o]]=n[s[o]]}return i}},{}],8:[function(e,t,n){var r=e("../appDispatcher"),s=e("../constants/update");t.exports=UpdateActions={create:function(e){r.dispatch({actionType:s.UPDATE_CREATE,text:e})},destroy:function(e){r.dispatch({actionType:s.UPDATE_DESTROY,id:e})},changeURL:function(e){r.dispatch({actionType:s.CHANGE_URL,url:e})}}},{"../appDispatcher":9,"../constants/update":15}],9:[function(e,t,n){var r=e("flux").Dispatcher;t.exports=new r},{flux:3}],10:[function(e,t,n){var r=e("./yourUpdates.react");t.exports=AppComponent=React.createClass({displayName:"AppComponent",render:function(){return React.createElement(r,{url:"/api/updates"})}})},{"./yourUpdates.react":14}],11:[function(e,t,n){var r=e("../actions/update"),s=e("../utils/prettyDate"),i=3e4;t.exports=UpdateComponent=React.createClass({displayName:"UpdateComponent",_handleDelete:function(e){e.preventDefault(),r.destroy(this.props.id)},componentWillEnter:function(e){var t=$(this.getDOMNode());t.fadeIn(500,function(){e()})},componentWillLeave:function(e){var t=$(this.getDOMNode());t.fadeOut(500,function(){e()})},componentDidMount:function(){var e=this;this.renderTimer=setInterval(function(){e.forceUpdate.call(e)},i)},componentWillUnmount:function(){clearInterval(this.renderTimer)},render:function(){return React.createElement("li",{className:"update_box",style:{display:"none"}},React.createElement("div",{className:"update"},React.createElement("span",{className:"content"},this.props.children)),React.createElement("div",{className:"options"},React.createElement("button",{className:"delete",onClick:this._handleDelete},"Delete"),React.createElement("div",{className:"info"},React.createElement("span",{className:"timestamp"},s(new Date(this.props.timestamp)))," by ",React.createElement("span",{className:"username"},React.createElement("a",{href:"http://nathankunicki.com/rewind/"},"@nathankunicki")))))}})},{"../actions/update":8,"../utils/prettyDate":19}],12:[function(e,t,n){var r=e("../actions/update");t.exports=UpdateFormComponent=React.createClass({displayName:"UpdateFormComponent",handleSubmit:function(e){e.preventDefault();var t=React.findDOMNode(this.refs.text).value.trim();t&&(r.create(t),React.findDOMNode(this.refs.text).value="")},render:function(){return React.createElement("form",{className:"update_form",onSubmit:this.handleSubmit},React.createElement("textarea",{placeholder:"What's on your mind?",ref:"text"}),React.createElement("div",{className:"options"},React.createElement("button",{className:"location"},"Add Location"),React.createElement("button",{className:"image"},"Add Image"),React.createElement("button",{className:"blog"},"Add Blog"),React.createElement("input",{type:"submit",value:"Post"})))}})},{"../actions/update":8}],13:[function(e,t,n){var r=e("./update.react"),s=e("../actions/update"),i=e("../stores/updates"),a=function(e){for(var t=["id","timestamp","text"],n=0;n<t.length;n++)if(!e.get(t[n]))return!1;return!0},o=function(){return{updates:i.getAll()}},c=React.addons.TransitionGroup;t.exports=UpdatesListComponent=React.createClass({displayName:"UpdatesListComponent",_onChange:function(){this.setState(o())},componentDidMount:function(){i.addChangeListener(this._onChange)},componentWillUnmount:function(){i.removeChangeListener(this._onChange)},getInitialState:function(){return s.changeURL(this.props.endpoint),o()},render:function(){for(var e=[],t=0;t<this.state.updates.length;t++){var n=this.state.updates.at(t);a(n)&&e.push(React.createElement(r,{key:n.get("id"),id:n.get("id"),timestamp:n.get("timestamp")},n.get("text")))}return React.createElement(c,{component:"ul",className:"updates_list"},e)}})},{"../actions/update":8,"../stores/updates":18,"./update.react":11}],14:[function(e,t,n){var r=e("../components/updateForm.react"),s=e("../components/updatesList.react"),i="/api/updates";t.exports=YourUpdatesComponent=React.createClass({displayName:"YourUpdatesComponent",render:function(){return React.createElement("div",{className:"my_updates"},React.createElement(r,null),React.createElement(s,{endpoint:i}))}})},{"../components/updateForm.react":12,"../components/updatesList.react":13}],15:[function(e,t,n){var r=e("keymirror");t.exports=r({UPDATE_CREATE:null,UPDATE_DESTROY:null,CHANGE_URL:null})},{keymirror:6}],16:[function(e,t,n){t.exports=UpdateModel=Backbone.Model.extend({defaults:{timestamp:null,text:null},urlRoot:"/api/updates"})},{}],17:[function(e,t,n){var r=e("./components/app.react");t.exports=Router=Backbone.Router.extend({routes:{"*filter":"setFilter"},setFilter:function(e){React.render(React.createElement(r,null),$("#app").get(0))}})},{"./components/app.react":10}],18:[function(e,t,n){var r=e("events").EventEmitter,s=e("object-assign"),i=e("../appDispatcher"),a=e("../constants/update"),o=e("../models/update"),c="change",h=null,l=1e4,p=Backbone.Collection.extend({model:o,comparator:function(e,t){return new Date(t.get("timestamp"))-new Date(e.get("timestamp"))},initialize:function(e){e=e||{},this.url=e.url||"/api/updates"}}),u=new p,d=s({},r.prototype,{getAll:function(){return u},emitChange:function(){this.emit(c)},addChangeListener:function(e){this.on(c,e),1==r.listenerCount(this,c)&&g()},removeChangeListener:function(e){this.removeListener(c,e),r.listenerCount(this,c)<=0&&_()}});u.on("add change remove",d.emitChange.bind(d),d);var f=function(e){var t=new o({timestamp:(new Date).toISOString(),text:e});u.add(t),t.save()},m=function(e){var t=u.get(e);t.destroy()},v=function(e){u.set([]),u.url=e},g=function(){u.fetch(),h=setInterval(function(){u.fetch()},l)},_=function(){clearInterval(h),h=null};t.exports=d,i.register(function(e){switch(e.actionType){case a.UPDATE_CREATE:f(e.text),d.emitChange();break;case a.UPDATE_DESTROY:m(e.id),d.emitChange();break;case a.CHANGE_URL:v(e.url)}})},{"../appDispatcher":9,"../constants/update":15,"../models/update":16,events:2,"object-assign":7}],19:[function(e,t,n){var r=function(e,t,n){return function(r){var s=Math.floor(r/e),i=t+(s>1?"s":"");return""+s+" "+i+" "+n}},s=[{threshold:-31535999,handler:r(-31536e3,"year","from now")},{threshold:-2591999,handler:r(-2592e3,"month","from now")},{threshold:-604799,handler:r(-604800,"week","from now")},{threshold:-172799,handler:r(-86400,"day","from now")},{threshold:-86399,handler:function(){return"tomorrow"}},{threshold:-3599,handler:r(-3600,"hour","from now")},{threshold:-59,handler:r(-60,"minute","from now")},{threshold:-.9999,handler:r(-1,"second","from now")},{threshold:5,handler:function(){return"Just now"}},{threshold:60,handler:r(1,"second","ago")},{threshold:3600,handler:r(60,"minute","ago")},{threshold:86400,handler:r(3600,"hour","ago")},{threshold:172800,handler:function(){return"Yesterday"}},{threshold:604800,handler:r(86400,"day","ago")},{threshold:2592e3,handler:r(604800,"week","ago")},{threshold:31536e3,handler:r(2592e3,"month","ago")},{threshold:1/0,handler:r(31536e3,"year","ago")}];t.exports=prettyDate=function(e){for(var t=((new Date).getTime()-e.getTime())/1e3,n=0;n<s.length;n++)if(t<s[n].threshold)return s[n].handler(t);return"Unknown date"}},{}]},{},[1]);